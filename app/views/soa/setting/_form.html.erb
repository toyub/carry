<%= form_for @staff, url: @action_uri, method: @method, html: {id: 'staff_form'} do |form| %>

<div class="main_top">
  <h2>员工详情</h2>
</div>

<div class="details">

  <table class="top_info">
    <tr>
      <td>员工姓名</td>
      <td></td>
      <td>员工编号</td>
      <td></td>
      <td>所属部门</td>
      <td></td>
      <td>职务</td>
      <td></td>
      <td>职称</td>
      <td></td>
      <td>职务状态</td>
      <td></td>
      <td>岗位状态</td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
  </table>

  <div class="details_nav">
    <ul>
      <li class="bg-color-fff"><a href="jibenxinxi.html" class="width-90">基本信息</a></li>
      <li><%= link_to "设置", soa_setting_path(@staff), class: "width-90" %></li>
      <li ><a href="#" class="width-90">绩效提成</a></li>
      <li ><a  href="#" class="width-90">考勤奖惩</a></li>
      <li ><a  href="#" class="width-90">记录</a></li>
    </ul>
  </div>

  <div class="details_content staff_setting">

    <div class="wrap">

      <div class="salary">
        <span class="width-60">薪资设置</span>

        <ul>
          <li>
            <%= form.label :trial_salary, "试用底薪" %>
            <%= form.text_field :trial_salary, disabled: @disable %>
          </li>

          <li>
            <%= form.label :trial_period, "试用周期" %>
            <%= form.text_field :trial_period, disabled: @disable, class: "width-100" %>
            <span class="width-56"> 月 </span>
          </li>

          <li class="text-align-right">
            <input type="button" value="转正" class="transfer_btn">
          </li>

          <li>
            <%= form.label :regular_salary, "正式底薪" %>
            <%= form.text_field :regular_salary, disabled: @disable %>
          </li>

          <li class="text-align-right">
            <input type="button" value="调薪" class="adjust_salary_btn">
          </li>
        </ul>
      </div>

      <div class="allowance">

        <span class="width-60">福利补贴</span>

        <ul>
          <%= form.fields_for :bonus do |bonus_fields| -%>
            <li>
              <%= bonus_fields.label :gangwei, "岗位补贴" %>
              <%= bonus_fields.text_field :gangwei, value: @staff.bonus["gangwei"], disabled: @disable %>
            </li>
            <li>
              <%= bonus_fields.label :zhusu, "住宿补贴" %>
              <%= bonus_fields.text_field :zhusu, value: @staff.bonus["zhusu"], disabled: @disable %>
            </li>
            <li>
              <%= bonus_fields.label :canfei, "餐费补贴" %>
              <%= bonus_fields.text_field :canfei, value: @staff.bonus["canfei"], disabled: @disable %>
            </li>
            <li>
              <%= bonus_fields.label :laobao, "劳保补贴" %>
              <%= bonus_fields.text_field :laobao, value: @staff.bonus["laobao"], disabled: @disable %>
            </li>
            <li>
              <%= bonus_fields.label :gaowen, "高温补贴" %>
              <%= bonus_fields.text_field :gaowen, value: @staff.bonus["gaowen"], disabled: @disable %>
            </li>
          <% end %>
        </ul>

      </div>

      <div class="ticheng">
        <span class="width-60">提成设置</span>
        <%= form.fields_for :other do |other_fields| %>
          <%= other_fields.label :deduct, "试用期结束有提成" %>
          <%= other_fields.check_box :deduct, checked: @staff.other["deduct"], disabled: @disable, class: "vertical-align-middle margin-left-20" %>
        <% end %>
      </div>
    </div>

    <div class="wrap">

      <div class="contract">
        <span class="width-60">劳动关系</span>

        <ul>
          <li class="start_time">
            <label>劳动合同起始</label>
            <input type="text" class="width-64 year" readonly>
            <input type="text" class="width-42 margin-right-2 month" readonly>
            <input type="text" class="width-40 day" readonly>
          </li>

          <li class="end_time">
            <label>劳动合同结束</label>
            <input type="text" class="width-64 year" readonly>
            <input type="text" class="width-42 margin-right-2 month" readonly>
            <input type="text" class="width-40 day" readonly>
          </li>

          <li>
            <label for="remind">合同到期提醒</label>
            <input id="remind" type="checkbox" class="vertical-align-middle margin-right-20 toggleable" data-target="deadline_reminding">
            提前<input type="text" class="width-50 margin-right-6 margin-left-6" data-id="deadline_reminding" disabled>天提醒
          </li>

          <li class="text-align-right">
            <input type="button" value="签订合同" class="sign_contract_btn cursor-pointer">
          </li>
        </ul>
      </div>


      <div class="social_security">
        <label for="security" class="width-60">保险金</label>

        <ul>
          <%= form.fields_for :bonus do |bonus_fields| %>
            <li>
              <input type="checkbox" id="security" class="vertical-align-middle toggleable" data-target="security">
              <%= bonus_fields.label :yibaofei, "医保费",  class: "width-74" %>
              <%= bonus_fields.text_field :yibaofei, value: @staff.bonus["yibaofei"], disabled: @disable %>
            </li>
            <li>
              <%= bonus_fields.label :baoxianjing, "保险金" %>
              <%= bonus_fields.text_field :baoxianjing, value: @staff.bonus["baoxianjing"], disabled: @disable %>
            </li>
            <li>
              <%= bonus_fields.label :gerendanbao, "个人承担" %>
              <%= bonus_fields.text_field :gerendanbao, value: @staff.bonus["gerendanbao"], disabled: @disable %>
            </li>
          <% end %>
        </ul>
      </div>
    </div>


    <div class="wrap">
      <div class="technique">
        <span class='width-60'>专业技能</span>

        <ul>
          <%= form.fields_for :skills do |skills_fields| %>

          <li>
            <%= skills_fields.label :other_skills, "其他技能" %>
            <%= skills_fields.select :other_skills, options_from_collection_for_select(@store.store_departments, 'id', 'name'), {}, {multiple: true}  %>
          </li>

          <br />
          <li>
            <%= skills_fields.label :theory, "理论知识" %>
            <%= skills_fields.range_field :theory, in: 1..100, value: @staff.skills["theory"], step: '.1', disabled: @disable %>
          </li>

          <li>
            <%= skills_fields.label :operate, "实操能力" %>
            <%= skills_fields.range_field :operate, in: 1..100, value: @staff.skills["operate"], step: '.1', disabled: @disable  %>
          </li>

          <li>
            <%= skills_fields.label :integrate, "综合能力" %>
            <%= skills_fields.range_field :integrate, in: 1..100, value: @staff.skills["integrate"] , step: '.1', disabled: @disable  %>
          </li>

          <li>
            <%= skills_fields.label :certificate, "技能证书" %>
            <%= skills_fields.select :certificate, [["无", false], ["有", true]], disabled: @disable, selected: @staff.skills["certificate"] %>
          </li>
        <% end %>

        </ul>
      </div>
    </div>


    <div class="wrap">

      <div class="others">
        <span class='width-60'>其他设置</span>

        <ul>
          <li>
            <%= form.fields_for :other do |other_fields| %>
              <%= other_fields.label :system_operator, "系统操作员" %>
              <%= other_fields.check_box :system_operator, checked: @staff.other["system_operator"], disabled: @disable, class: "vertical-align-middle margin-left-46" %>
            <% end %>
          </li>

          <li>
            <%= form.fields_for :other do |other_fields| %>
              <%= other_fields.label :can_use_app, "允许使用APP" %>
              <%= other_fields.check_box :can_user_app, checked: @staff.other["can_user_app"], disabled: @disable, class: "vertical-align-middle margin-left-36" %>
            <% end %>
          </li>
        </ul>
      </div>
    </div>


    <div class="btn_group">
      <% if params[:action] == "show" %>
        <%= form.submit "编辑", class: "btn edit_btn" %>
      <% else %>
        <%= form.submit "保存", class: "btn save_btn" %>
      <% end %>
    </div>
  </div>

</div>

<% end %>

<!-- ## zhuanzhengdan -->
<%= render "/soa/setting/zhuanzhengdan" %>

<!-- ## tiaoxindan -->
<%= render "/soa/setting/tiaoxindan" %>

<!-- ## hetongxuqiandan -->
<%= render "/soa/setting/hetongxuqiandan" %>


<script type="text/javascript" charset="utf-8">
  $(document).ready(function(){

    $(".transfer_btn").on("click", function(){
      $(".transfer_wrap").css("display", "block");
    })

    $(".adjust_salary_btn").on("click", function(){
      $(".salary_adjusting_wrap").css("display", "block");
    })

    $(".sign_contract_btn").on("click", function(){
      $(".contract_signing_wrap").css("display", "block");
    })

    $(".cancel_btn").on("click", function(event){
      event.preventDefault();
      var closed_class_name = $(this).data("from");
      $("."+ closed_class_name).css("display", "none");
    })

    $("#store_staff_skills_other_skills").select2();

    $(".transfer_btn").attr("disabled", <%= @disable %>);
    $(".adjust_salary_btn").attr("disabled", <%= @disable %>);
    $(".sign_contract_btn").attr("disabled", <%= @disable %>);

  })
</script>
